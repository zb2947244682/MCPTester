# 更新日志

## [1.1.0] - 2024-01-21

### 🎉 根据用户反馈的重要改进

#### 修复的问题

1. **`validate_mcp_tools` 自定义参数支持**
   - **问题**：之前的版本中，`test_params` 参数未被正确使用，总是使用默认参数（如 `{a: 42, b: 42}`）
   - **解决方案**：
     - 测试单个工具时，`test_params` 现在直接作为测试参数使用
     - 测试多个工具时，`test_params` 应该是一个对象，键为工具名，值为对应参数
   - **示例**：
     ```json
     // 测试单个工具
     {
       "tool_name": "add",
       "test_params": {"a": 100, "b": 200}  // 直接传递参数
     }
     
     // 测试多个工具
     {
       "test_params": {
         "add": {"a": 100, "b": 200},
         "multiply": {"x": 3, "y": 4}
       }
     }
     ```

2. **`mock_mcp_client` 参数格式改进**
   - **问题**：`request_data` 参数格式不够直观，用户容易混淆使用 `toolName`/`parameters` 而不是正确的 `name`/`arguments`
   - **解决方案**：
     - 在工具描述中添加了清晰的格式说明和示例
     - 支持多种常见的参数格式（向后兼容）
     - 提供更友好的错误提示
   - **支持的格式**：
     - 标准格式：`{"name": "tool", "arguments": {...}}`
     - 兼容格式：`{"toolName": "tool", "parameters": {...}}`
     - 兼容格式：`{"toolName": "tool", "params": {...}}`

#### 新增功能

- 工具描述中添加了详细的参数格式示例
- 错误信息更加友好和具体，包含正确格式的提示
- 自动格式转换，提高易用性

#### 改进的用户体验

- 减少了用户在使用工具时的困惑
- 提供了更灵活的参数输入方式
- 保持向后兼容性，不会破坏现有的使用方式

### 感谢

感谢用户的详细反馈，这些改进让 MCPTester 变得更加易用和强大！

---

## [1.0.0] - 2024-01-20

### 🚀 初始版本 - 全面重构

#### 核心功能

1. **真实的MCP协议通信**
   - 实现了完整的MCPClient类
   - 支持所有标准MCP操作（初始化、工具列表、工具调用等）
   - 异步请求/响应处理
   - 超时机制

2. **五大测试工具**
   - `test_mcp_server` - 测试MCP服务器基本功能
   - `validate_mcp_tools` - 验证工具的schema和功能
   - `benchmark_mcp_performance` - 性能基准测试
   - `generate_mcp_test_report` - 生成详细测试报告
   - `mock_mcp_client` - 模拟客户端请求

3. **详细的测试报告**
   - 显示完整的请求参数（JSON格式）
   - 显示实际的响应结果（JSON格式）
   - 记录执行时间和错误信息
   - Markdown格式的测试报告

4. **性能测试**
   - 测量真实的响应时间
   - 支持并发请求测试
   - 统计分析（平均值、最小值、最大值、P50、P95）

### 技术特点

- 基于 @modelcontextprotocol/sdk
- 支持 Windows/Linux/macOS
- Node.js 18+ 兼容
- 完全使用真实数据，无模拟

### 文档

- 完整的 README.md
- 详细的测试命令示例
- 演示脚本
- 示例MCP服务器
