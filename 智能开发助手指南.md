# 🤖 MCP智能开发助手指南

## 🎯 目标
让大模型能够：
1. **自动复制项目基础结构**
2. **基于需求自动开发MCP服务**  
3. **自动测试和验证功能**

## 💻 系统环境
基于 **Windows 11** 系统，使用PowerShell命令：
- 复制目录：`xcopy source target /E /I /H`
- 删除目录：`rmdir /s /q target`

## 🚀 开发流程

### 1. 项目创建
```powershell
# 复制基础结构（删除.git目录）
xcopy mcp-calculator mcp-your-service /E /I /H
cd mcp-your-service
if exist .git rmdir /s /q .git
npm install
```

### 2. 代码生成要点
- 分析现有代码结构
- 设计数据模型
- 实现CRUD操作
- 注册工具

### 3. 测试验证
- 使用mcp-tester测试连接
- 验证所有工具功能

## 📚 MCP开发教程

### 基本结构
```javascript
import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
import { z } from "zod";

const server = new McpServer({ name: "service-name", version: "1.0.0" });

server.registerTool("tool_name", {
  title: "工具标题",
  inputSchema: { /* 参数定义 */ }
}, async (params) => {
  // 工具逻辑
});

const transport = new StdioServerTransport();
await server.connect(transport);
```

### 数据结构
```javascript
let dataStore = new Map();
let stats = { totalItems: 0, accessCount: 0 };

function generateId() {
  return Date.now().toString(36) + Math.random().toString(36).substr(2);
}

function getCurrentTimestamp() {
  return new Date().toISOString();
}
```

### 工具注册模式
```javascript
server.registerTool("item_operations", {
  inputSchema: {
    action: z.enum(["create", "get", "update", "delete", "list"]),
    name: z.string().optional(),
    id: z.string().optional()
  }
}, async ({ action, name, id }) => {
  try {
    switch (action) {
      case "create":
        const item = { id: generateId(), name, createdAt: getCurrentTimestamp() };
        dataStore.set(item.id, item);
        return { content: [{ type: "text", text: `✅ 创建成功: ${item.id}` }] };
      // ... 其他操作
    }
  } catch (error) {
    return { content: [{ type: "text", text: `❌ 错误: ${error.message}` }] };
  }
});
```

## 🔧 智能开发指令模板

### 创建新MCP服务
```
请基于MCP开发教程，为我创建一个[具体功能]的MCP服务。

要求：
1. 自动复制mcp-calculator项目结构（删除.git目录）
2. 重命名为mcp-[功能名]
3. 更新package.json和README.md
4. 实现核心功能
5. 注册必要工具
6. 使用mcp-tester测试
7. 采用模块化开发，保持index.js低于500行

请按步骤执行，每步都要有明确的命令和代码。
```

## 🧪 测试流程
```bash
# 测试MCP服务器连接
mcp_mcp-tester_test_mcp_server

# 批量工具测试  
mcp_mcp-tester_batch_test_tools

# 验证所有工具
mcp_mcp-tester_validate_mcp_tools
```

## 🏗️ 模块化开发

### 推荐项目结构
```
mcp-your-service/
├── index.js           # 主入口 (<500行)
├── tools/            # 工具模块
│   ├── index.js      # 工具注册
│   ├── crud.js       # CRUD操作
│   └── search.js     # 搜索工具
├── models/           # 数据模型
│   ├── dataStore.js  # 数据存储
│   └── schemas.js    # 数据验证
└── utils/            # 通用工具
    └── helpers.js    # 辅助函数
```

### 模块化实现
```javascript
// index.js - 主入口
import { registerTools } from "./tools/index.js";
import { initializeDataStore } from "./models/index.js";

const server = new McpServer({ name: "service", version: "1.0.0" });
await initializeDataStore();
await registerTools(server);
await server.connect(new StdioServerTransport());
```

## 💡 核心开发原则

### ⚡ 关键原则：少工具，多功能
- 一个工具完成多种相关操作
- 使用 `action` 参数区分操作类型
- 参数复用最大化
- 智能默认值

### 🔑 成功因素
1. **工具数量控制** - 大模型有工具数量上限
2. **详细参数说明** - 每个参数都要有清晰描述和示例
3. **友好错误处理** - 提供具体错误信息和解决建议
4. **用户体验优先** - 使用表情符号、格式化文本
5. **模块化开发** - 保持index.js简洁，便于维护

## 🐛 常见问题

### 1. 依赖安装问题
```powershell
if exist node_modules rmdir /s /q node_modules
if exist package-lock.json del package-lock.json
npm install
```

### 2. 项目复制注意事项
- 不要复制.git目录：`if exist .git rmdir /s /q .git`
- 更新package.json包名：`@zb2947244682/mcp-[功能名]`
- 完全重写README.md

### 3. 代码质量保证
- 使用Zod进行严格参数验证
- 提供有意义的错误信息
- 使用表情符号提升用户体验
- 实现完整的CRUD操作

## 🎯 使用示例

现在你可以这样与大模型对话：

```
请基于MCP开发教程，为我创建一个[你的需求]的MCP服务。

请按以下步骤执行：
1. 自动复制项目基础结构
2. 重命名和配置项目  
3. 实现核心功能
4. 注册必要工具
5. 完整测试验证
6. 采用模块化开发，保持index.js低于500行

每步都要有具体的命令和代码实现。
```

---

**记住核心原则：少工具，多功能，用户体验优先！** 💪